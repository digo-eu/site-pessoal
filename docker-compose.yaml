services:

  nginx:
    image: nginx
    ports: 
      - 80:80
      - 443:443
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    secrets:
      - source: nginx_cert
        target: /etc/ssl/cert.pem
      - source: nginx_key
        target: /etc/ssl/key.pem
    restart: unless-stopped

  air:
    image: cosmtrek/air
    working_dir: /air-server/
    volumes:
      - ./air-server/:/air-server/

  geoserver:
    image: docker.osgeo.org/geoserver:2.25.x
    volumes:
      - ./geoserver_data/:/geoserver_data/
    restart: unless-stopped
        
  webcolorblue:
    image: fabricioveronez/web-color:blue
  webcolorgreen:
    image: fabricioveronez/web-color:green

secrets:
  nginx_cert:
    file: ./certs/cert.pem
  nginx_key:
    file: ./certs/key.pem
